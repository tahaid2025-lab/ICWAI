<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICWAI - AI Creative Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                }
            }
        }
    };
    </script>
    <style>
        :root {
            --background: hsl(0 0% 100%);
            --foreground: hsl(222.2 84% 4.9%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(222.2 84% 4.9%);
            --primary: hsl(262 83% 58%);
            --primary-foreground: hsl(210 40% 98%);
            --secondary: hsl(210 40% 96%);
            --secondary-foreground: hsl(222.2 47.4% 11.2%);
            --muted: hsl(210 40% 96%);
            --muted-foreground: hsl(215.4 16.3% 46.9%);
            --accent: hsl(210 40% 96%);
            --accent-foreground: hsl(222.2 47.4% 11.2%);
            --border: hsl(214.3 31.8% 91.4%);
            --input: hsl(214.3 31.8% 91.4%);
            --ring: hsl(262 83% 58%);
            --radius: 0.75rem;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .gradient-lego {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .gradient-playground {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hidden { display: none; }
        .block { display: block; }
        
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-background text-foreground min-h-screen">
    <!-- @COMPONENT: WelcomeScreen -->
    <div id="welcomeScreen" class="fade-in">
        <div class="gradient-bg min-h-screen flex flex-col items-center justify-center p-6 text-white">
            <div class="text-center max-w-md mx-auto">
                <div class="mb-8">
                    <i class="fas fa-palette text-6xl mb-4 opacity-90"></i>
                    <h1 class="text-4xl font-bold mb-2">ICWAI</h1>
                    <p class="text-xl font-light opacity-90">AI Creative Studio</p>
                </div>
                
                <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 mb-8">
                    <h2 class="text-xl font-semibold mb-4">Welcome to the Future of Creativity</h2>
                    <p class="text-sm leading-relaxed opacity-90 mb-4">
                        Unleash your imagination with our powerful AI-driven creative tools. Transform ideas into stunning visuals, create unique LEGO designs, and explore endless creative possibilities.
                    </p>
                    <div class="grid grid-cols-1 gap-3 text-left">
                        <div class="flex items-center">
                            <i class="fas fa-magic text-yellow-300 mr-3"></i>
                            <span class="text-sm">AI-Powered Drawing Assistant</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-cubes text-blue-300 mr-3"></i>
                            <span class="text-sm">Custom LEGO Creator</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-smile text-green-300 mr-3"></i>
                            <span class="text-sm">Interactive Playground</span>
                        </div>
                    </div>
                </div>
                
                <button onclick="showMainMenu()" class="bg-white text-primary font-semibold py-4 px-8 rounded-2xl shadow-lg transform transition-all duration-200 hover:scale-105 active:scale-95">
                    <i class="fas fa-rocket mr-2"></i>
                    Get Started
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: WelcomeScreen -->

    <!-- @COMPONENT: MainMenu -->
    <div id="mainMenu" class="hidden fade-in">
        <div class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4">
            <!-- Header -->
            <div class="flex items-center justify-between mb-8 pt-4">
                <div>
                    <h1 class="text-2xl font-bold text-foreground">ICWAI</h1>
                    <p class="text-muted-foreground text-sm">Choose your creative tool</p>
                </div>
                <div class="flex items-center space-x-3">
                    <button onclick="showGallery()" class="p-3 rounded-xl bg-card shadow-sm border">
                        <i class="fas fa-images text-muted-foreground"></i>
                    </button>
                    <button class="p-3 rounded-xl bg-card shadow-sm border">
                        <i class="fas fa-globe text-muted-foreground"></i>
                    </button>
                </div>
            </div>

            <!-- Feature Cards -->
            <div class="space-y-4 max-w-md mx-auto">
                <!-- Drawing Assistant Card -->
                <!-- @COMPONENT: FeatureCard [Drawing Assistant] -->
                <div onclick="showDrawingAssistant()" class="gradient-card rounded-3xl p-6 text-white cursor-pointer transform transition-all duration-200 hover:scale-102 active:scale-98 shadow-xl">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-xl font-bold">Drawing Assistant</h3>
                            <p class="text-white/80 text-sm">Samsung-style AI art creation</p>
                        </div>
                        <i class="fas fa-paintbrush text-3xl opacity-80"></i>
                    </div>
                    <div class="text-white/90 text-sm">
                        Transform photos with artistic styles and create images from text descriptions.
                    </div>
                </div>
                <!-- @END_COMPONENT: FeatureCard -->

                <!-- LEGO Creator Card -->
                <!-- @COMPONENT: FeatureCard [LEGO Creator] -->
                <div onclick="showLegoCreator()" class="gradient-lego rounded-3xl p-6 text-white cursor-pointer transform transition-all duration-200 hover:scale-102 active:scale-98 shadow-xl">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-xl font-bold">LEGO Creator</h3>
                            <p class="text-white/80 text-sm">Custom LEGO design generator</p>
                        </div>
                        <i class="fas fa-cubes text-3xl opacity-80"></i>
                    </div>
                    <div class="text-white/90 text-sm">
                        Describe your vision and watch AI create unique LEGO designs with custom colors and shapes.
                    </div>
                </div>
                <!-- @END_COMPONENT: FeatureCard -->

                <!-- Playground Card -->
                <!-- @COMPONENT: FeatureCard [Playground] -->
                <div onclick="showPlayground()" class="gradient-playground rounded-3xl p-6 text-white cursor-pointer transform transition-all duration-200 hover:scale-102 active:scale-98 shadow-xl">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-xl font-bold">Playground</h3>
                            <p class="text-white/80 text-sm">Apple-style emoji combinations</p>
                        </div>
                        <i class="fas fa-smile text-3xl opacity-80"></i>
                    </div>
                    <div class="text-white/90 text-sm">
                        Combine emojis and backgrounds to create whimsical, unique artworks.
                    </div>
                </div>
                <!-- @END_COMPONENT: FeatureCard -->
            </div>

            <!-- Recent Creations Preview -->
            <div class="mt-8 max-w-md mx-auto">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold text-foreground">Recent Creations</h3>
                    <button onclick="showGallery()" class="text-primary text-sm font-medium">View All</button>
                </div>
                <div class="grid grid-cols-3 gap-3" data-mock="true">
                    <!-- Recent creation thumbnails would be loaded here -->
                    <div class="aspect-square bg-muted rounded-xl flex items-center justify-center">
                        <i class="fas fa-image text-muted-foreground text-xl"></i>
                    </div>
                    <div class="aspect-square bg-muted rounded-xl flex items-center justify-center">
                        <i class="fas fa-image text-muted-foreground text-xl"></i>
                    </div>
                    <div class="aspect-square bg-muted rounded-xl flex items-center justify-center">
                        <i class="fas fa-plus text-muted-foreground text-xl"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: MainMenu -->

    <!-- @COMPONENT: DrawingAssistant -->
    <div id="drawingAssistant" class="hidden fade-in">
        <div class="min-h-screen bg-background">
            <!-- Header -->
            <div class="bg-card border-b sticky top-0 z-10">
                <div class="flex items-center justify-between p-4">
                    <button onclick="showMainMenu()" class="p-2 rounded-lg hover:bg-muted">
                        <i class="fas fa-arrow-left text-muted-foreground"></i>
                    </button>
                    <h1 class="font-semibold text-foreground">Drawing Assistant</h1>
                    <button class="p-2 rounded-lg hover:bg-muted">
                        <i class="fas fa-ellipsis-v text-muted-foreground"></i>
                    </button>
                </div>
            </div>

            <!-- Tool Selection -->
            <div class="p-4">
                <div class="flex space-x-3 mb-6">
                    <button onclick="showStyleTransfer()" class="flex-1 bg-primary text-primary-foreground py-3 px-4 rounded-xl font-medium">
                        <i class="fas fa-palette mr-2"></i>
                        Style Transfer
                    </button>
                    <button onclick="showTextToImage()" class="flex-1 bg-muted text-muted-foreground py-3 px-4 rounded-xl font-medium">
                        <i class="fas fa-pen mr-2"></i>
                        Text to Image
                    </button>
                </div>

                <!-- Style Transfer Section -->
                <div id="styleTransferSection">
                    <div class="space-y-4">
                        <!-- Image Upload -->
                        <div class="bg-card border-2 border-dashed border-border rounded-2xl p-8 text-center">
                            <i class="fas fa-cloud-upload-alt text-4xl text-muted-foreground mb-4"></i>
                            <p class="text-muted-foreground mb-2">Upload your photo</p>
                            <button class="bg-primary text-primary-foreground px-6 py-2 rounded-xl text-sm font-medium">
                                Choose Image
                            </button>
                            <!-- @FUNCTIONALITY: Image upload component should handle file selection and preview -->
                        </div>

                        <!-- Style Selection -->
                        <div>
                            <h3 class="font-semibold mb-3">Choose Art Style</h3>
                            <div class="grid grid-cols-3 gap-3">
                                <div class="border-2 border-primary rounded-xl p-3 bg-primary/5">
                                    <div class="aspect-square bg-gradient-to-br from-orange-400 to-red-500 rounded-lg mb-2"></div>
                                    <p class="text-xs text-center font-medium">Van Gogh</p>
                                </div>
                                <div class="border border-border rounded-xl p-3">
                                    <div class="aspect-square bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg mb-2"></div>
                                    <p class="text-xs text-center font-medium">Picasso</p>
                                </div>
                                <div class="border border-border rounded-xl p-3">
                                    <div class="aspect-square bg-gradient-to-br from-green-400 to-blue-500 rounded-lg mb-2"></div>
                                    <p class="text-xs text-center font-medium">Monet</p>
                                </div>
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <button onclick="generateStyleTransfer()" class="w-full bg-gradient-to-r from-primary to-purple-600 text-white py-4 rounded-2xl font-semibold shadow-lg">
                            <i class="fas fa-magic mr-2"></i>
                            Transform Image
                        </button>
                    </div>
                </div>

                <!-- Text to Image Section -->
                <div id="textToImageSection" class="hidden">
                    <div class="space-y-4">
                        <!-- Text Input -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Describe your image</label>
                            <textarea class="w-full border border-input rounded-xl p-4 h-24 resize-none" placeholder="A beautiful sunset over mountains with vibrant colors..." data-implementation="Should support multi-language input"></textarea>
                        </div>

                        <!-- Style Options -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Art Style</label>
                            <select class="w-full border border-input rounded-xl p-3">
                                <option>Realistic</option>
                                <option>Digital Art</option>
                                <option>Oil Painting</option>
                                <option>Watercolor</option>
                                <option>Sketch</option>
                            </select>
                        </div>

                        <!-- Advanced Options -->
                        <div class="bg-muted rounded-xl p-4">
                            <h4 class="font-medium mb-3">Advanced Options</h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm mb-1">Quality</label>
                                    <div class="flex space-x-2">
                                        <button class="flex-1 py-2 px-3 rounded-lg bg-primary text-primary-foreground text-sm">High</button>
                                        <button class="flex-1 py-2 px-3 rounded-lg bg-card text-muted-foreground text-sm">Medium</button>
                                        <button class="flex-1 py-2 px-3 rounded-lg bg-card text-muted-foreground text-sm">Fast</button>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm mb-1">Dimensions</label>
                                    <select class="w-full border border-input rounded-lg p-2 text-sm">
                                        <option>Square (1024x1024)</option>
                                        <option>Portrait (768x1024)</option>
                                        <option>Landscape (1024x768)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <button onclick="generateTextToImage()" class="w-full bg-gradient-to-r from-primary to-purple-600 text-white py-4 rounded-2xl font-semibold shadow-lg">
                            <i class="fas fa-wand-magic-sparkles mr-2"></i>
                            Generate Image
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: DrawingAssistant -->

    <!-- @COMPONENT: LegoCreator -->
    <div id="legoCreator" class="hidden fade-in">
        <div class="min-h-screen bg-background">
            <!-- Header -->
            <div class="bg-card border-b sticky top-0 z-10">
                <div class="flex items-center justify-between p-4">
                    <button onclick="showMainMenu()" class="p-2 rounded-lg hover:bg-muted">
                        <i class="fas fa-arrow-left text-muted-foreground"></i>
                    </button>
                    <h1 class="font-semibold text-foreground">LEGO Creator</h1>
                    <button class="p-2 rounded-lg hover:bg-muted">
                        <i class="fas fa-info-circle text-muted-foreground"></i>
                    </button>
                </div>
            </div>

            <div class="p-4 space-y-6">
                <!-- Description Input -->
                <div>
                    <label class="block text-sm font-medium mb-2">Describe your LEGO creation</label>
                    <textarea class="w-full border border-input rounded-xl p-4 h-32 resize-none" placeholder="A spaceship with blue and silver colors, featuring angular designs and transparent cockpit windows..." data-implementation="Should support multi-language input"></textarea>
                </div>

                <!-- Design Specifications -->
                <div class="bg-muted rounded-xl p-4">
                    <h3 class="font-semibold mb-4">Design Specifications</h3>
                    
                    <!-- Color Palette -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Primary Colors</label>
                        <div class="flex flex-wrap gap-2">
                            <button class="w-8 h-8 rounded-full bg-red-500 border-2 border-white shadow-sm"></button>
                            <button class="w-8 h-8 rounded-full bg-blue-500 border-2 border-primary shadow-sm"></button>
                            <button class="w-8 h-8 rounded-full bg-green-500 border-2 border-white shadow-sm"></button>
                            <button class="w-8 h-8 rounded-full bg-yellow-500 border-2 border-white shadow-sm"></button>
                            <button class="w-8 h-8 rounded-full bg-purple-500 border-2 border-white shadow-sm"></button>
                            <button class="w-8 h-8 rounded-full bg-orange-500 border-2 border-white shadow-sm"></button>
                            <button class="w-8 h-8 rounded-full bg-gray-800 border-2 border-white shadow-sm"></button>
                            <button class="w-8 h-8 rounded-full bg-white border-2 border-gray-300 shadow-sm"></button>
                        </div>
                    </div>

                    <!-- Size and Complexity -->
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Size</label>
                            <select class="w-full border border-input rounded-lg p-2">
                                <option>Small (50-100 pieces)</option>
                                <option>Medium (100-300 pieces)</option>
                                <option>Large (300+ pieces)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Complexity</label>
                            <select class="w-full border border-input rounded-lg p-2">
                                <option>Simple</option>
                                <option>Intermediate</option>
                                <option>Advanced</option>
                            </select>
                        </div>
                    </div>

                    <!-- Theme -->
                    <div>
                        <label class="block text-sm font-medium mb-2">Theme</label>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="py-2 px-3 rounded-lg bg-primary text-primary-foreground text-sm">Space</button>
                            <button class="py-2 px-3 rounded-lg bg-card border text-muted-foreground text-sm">Castle</button>
                            <button class="py-2 px-3 rounded-lg bg-card border text-muted-foreground text-sm">City</button>
                            <button class="py-2 px-3 rounded-lg bg-card border text-muted-foreground text-sm">Nature</button>
                        </div>
                    </div>
                </div>

                <!-- Special Features -->
                <div>
                    <h3 class="font-semibold mb-3">Special Features</h3>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-border text-primary mr-3">
                            <span class="text-sm">Moving parts</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-border text-primary mr-3">
                            <span class="text-sm">Transparent elements</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-border text-primary mr-3">
                            <span class="text-sm">LED integration</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-border text-primary mr-3">
                            <span class="text-sm">Modular design</span>
                        </label>
                    </div>
                </div>

                <!-- Generate Button -->
                <button onclick="generateLego()" class="w-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white py-4 rounded-2xl font-semibold shadow-lg">
                    <i class="fas fa-cubes mr-2"></i>
                    Create LEGO Design
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: LegoCreator -->

    <!-- @COMPONENT: Playground -->
    <div id="playground" class="hidden fade-in">
        <div class="min-h-screen bg-background">
            <!-- Header -->
            <div class="bg-card border-b sticky top-0 z-10">
                <div class="flex items-center justify-between p-4">
                    <button onclick="showMainMenu()" class="p-2 rounded-lg hover:bg-muted">
                        <i class="fas fa-arrow-left text-muted-foreground"></i>
                    </button>
                    <h1 class="font-semibold text-foreground">Playground</h1>
                    <button onclick="clearPlayground()" class="p-2 rounded-lg hover:bg-muted">
                        <i class="fas fa-trash text-muted-foreground"></i>
                    </button>
                </div>
            </div>

            <div class="p-4 space-y-6">
                <!-- Canvas Preview -->
                <div class="bg-gradient-to-br from-pink-100 to-blue-100 rounded-2xl p-8 text-center border-2 border-dashed border-border min-h-48 flex flex-col items-center justify-center" id="playgroundCanvas">
                    <div class="text-4xl mb-4" id="selectedEmojis" data-mock="true">🚀✨🌟</div>
                    <p class="text-muted-foreground text-sm">Your creation will appear here</p>
                </div>

                <!-- Emoji Selection -->
                <div>
                    <h3 class="font-semibold mb-3">Choose Emojis</h3>
                    <div class="bg-muted rounded-xl p-4">
                        <div class="grid grid-cols-8 gap-2 mb-4">
                            <!-- @MAP: popularEmojis.map(emoji => ( -->
                            <button onclick="addEmoji('😀')" class="text-2xl p-2 rounded-lg hover:bg-background">😀</button>
                            <button onclick="addEmoji('🚀')" class="text-2xl p-2 rounded-lg hover:bg-background">🚀</button>
                            <button onclick="addEmoji('🌟')" class="text-2xl p-2 rounded-lg hover:bg-background">🌟</button>
                            <button onclick="addEmoji('🎨')" class="text-2xl p-2 rounded-lg hover:bg-background">🎨</button>
                            <button onclick="addEmoji('🦄')" class="text-2xl p-2 rounded-lg hover:bg-background">🦄</button>
                            <button onclick="addEmoji('🌈')" class="text-2xl p-2 rounded-lg hover:bg-background">🌈</button>
                            <button onclick="addEmoji('🔥')" class="text-2xl p-2 rounded-lg hover:bg-background">🔥</button>
                            <button onclick="addEmoji('💎')" class="text-2xl p-2 rounded-lg hover:bg-background">💎</button>
                            <button onclick="addEmoji('🎭')" class="text-2xl p-2 rounded-lg hover:bg-background">🎭</button>
                            <button onclick="addEmoji('🌸')" class="text-2xl p-2 rounded-lg hover:bg-background">🌸</button>
                            <button onclick="addEmoji('⚡')" class="text-2xl p-2 rounded-lg hover:bg-background">⚡</button>
                            <button onclick="addEmoji('🍀')" class="text-2xl p-2 rounded-lg hover:bg-background">🍀</button>
                            <button onclick="addEmoji('🌙')" class="text-2xl p-2 rounded-lg hover:bg-background">🌙</button>
                            <button onclick="addEmoji('☀️')" class="text-2xl p-2 rounded-lg hover:bg-background">☀️</button>
                            <button onclick="addEmoji('🌊')" class="text-2xl p-2 rounded-lg hover:bg-background">🌊</button>
                            <button onclick="addEmoji('🎪')" class="text-2xl p-2 rounded-lg hover:bg-background">🎪</button>
                            <!-- @END_MAP )) -->
                        </div>
                        <div class="flex space-x-2">
                            <button class="flex-1 py-2 px-3 rounded-lg bg-primary text-primary-foreground text-sm">Popular</button>
                            <button class="flex-1 py-2 px-3 rounded-lg bg-card text-muted-foreground text-sm">Nature</button>
                            <button class="flex-1 py-2 px-3 rounded-lg bg-card text-muted-foreground text-sm">Objects</button>
                            <button class="flex-1 py-2 px-3 rounded-lg bg-card text-muted-foreground text-sm">Animals</button>
                        </div>
                    </div>
                </div>

                <!-- Background Selection -->
                <div>
                    <h3 class="font-semibold mb-3">Choose Background</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <button onclick="selectBackground('gradient1')" class="aspect-square rounded-xl border-2 border-primary bg-gradient-to-br from-purple-400 to-pink-400"></button>
                        <button onclick="selectBackground('gradient2')" class="aspect-square rounded-xl border border-border bg-gradient-to-br from-blue-400 to-green-400"></button>
                        <button onclick="selectBackground('gradient3')" class="aspect-square rounded-xl border border-border bg-gradient-to-br from-orange-400 to-red-400"></button>
                        <button onclick="selectBackground('gradient4')" class="aspect-square rounded-xl border border-border bg-gradient-to-br from-teal-400 to-blue-400"></button>
                        <button onclick="selectBackground('gradient5')" class="aspect-square rounded-xl border border-border bg-gradient-to-br from-pink-400 to-yellow-400"></button>
                        <button onclick="selectBackground('solid')" class="aspect-square rounded-xl border border-border bg-gray-100 flex items-center justify-center">
                            <i class="fas fa-palette text-gray-400"></i>
                        </button>
                    </div>
                </div>

                <!-- Style Options -->
                <div>
                    <h3 class="font-semibold mb-3">Style Effects</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button class="py-3 px-4 rounded-xl bg-primary text-primary-foreground font-medium">
                            <i class="fas fa-sparkles mr-2"></i>
                            Magical
                        </button>
                        <button class="py-3 px-4 rounded-xl bg-card border text-muted-foreground font-medium">
                            <i class="fas fa-brush mr-2"></i>
                            Artistic
                        </button>
                        <button class="py-3 px-4 rounded-xl bg-card border text-muted-foreground font-medium">
                            <i class="fas fa-bolt mr-2"></i>
                            Dynamic
                        </button>
                        <button class="py-3 px-4 rounded-xl bg-card border text-muted-foreground font-medium">
                            <i class="fas fa-heart mr-2"></i>
                            Dreamy
                        </button>
                    </div>
                </div>

                <!-- Generate Button -->
                <button onclick="generatePlayground()" class="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white py-4 rounded-2xl font-semibold shadow-lg">
                    <i class="fas fa-magic mr-2"></i>
                    Create Artwork
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: Playground -->

    <!-- @COMPONENT: Gallery -->
    <div id="gallery" class="hidden fade-in">
        <div class="min-h-screen bg-background">
            <!-- Header -->
            <div class="bg-card border-b sticky top-0 z-10">
                <div class="flex items-center justify-between p-4">
                    <button onclick="showMainMenu()" class="p-2 rounded-lg hover:bg-muted">
                        <i class="fas fa-arrow-left text-muted-foreground"></i>
                    </button>
                    <h1 class="font-semibold text-foreground">My Gallery</h1>
                    <button class="p-2 rounded-lg hover:bg-muted">
                        <i class="fas fa-search text-muted-foreground"></i>
                    </button>
                </div>
            </div>

            <!-- Filter Tabs -->
            <div class="p-4 border-b">
                <div class="flex space-x-2">
                    <button class="px-4 py-2 rounded-xl bg-primary text-primary-foreground text-sm font-medium">All</button>
                    <button class="px-4 py-2 rounded-xl bg-muted text-muted-foreground text-sm font-medium">Drawing</button>
                    <button class="px-4 py-2 rounded-xl bg-muted text-muted-foreground text-sm font-medium">LEGO</button>
                    <button class="px-4 py-2 rounded-xl bg-muted text-muted-foreground text-sm font-medium">Playground</button>
                </div>
            </div>

            <!-- Gallery Grid -->
            <div class="p-4">
                <div class="grid grid-cols-2 gap-4" id="galleryGrid" data-mock="true">
                    <!-- @MAP: userCreations.map(creation => ( -->
                    <!-- Sample gallery items -->
                    <div class="relative group">
                        <div class="aspect-square bg-gradient-to-br from-purple-200 to-pink-200 rounded-xl overflow-hidden">
                            <div class="w-full h-full flex items-center justify-center text-2xl">🎨</div>
                        </div>
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-active:opacity-100 transition-opacity rounded-xl flex items-center justify-center space-x-4">
                            <button onclick="downloadImage(1)" class="p-3 bg-white/20 rounded-full backdrop-blur-sm">
                                <i class="fas fa-download text-white"></i>
                            </button>
                            <button onclick="deleteImage(1)" class="p-3 bg-white/20 rounded-full backdrop-blur-sm">
                                <i class="fas fa-trash text-white"></i>
                            </button>
                        </div>
                        <div class="mt-2">
                            <p class="text-xs text-muted-foreground">Drawing Assistant • 2 hours ago</p>
                        </div>
                    </div>

                    <div class="relative group">
                        <div class="aspect-square bg-gradient-to-br from-blue-200 to-cyan-200 rounded-xl overflow-hidden">
                            <div class="w-full h-full flex items-center justify-center text-2xl">🚀</div>
                        </div>
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-active:opacity-100 transition-opacity rounded-xl flex items-center justify-center space-x-4">
                            <button onclick="downloadImage(2)" class="p-3 bg-white/20 rounded-full backdrop-blur-sm">
                                <i class="fas fa-download text-white"></i>
                            </button>
                            <button onclick="deleteImage(2)" class="p-3 bg-white/20 rounded-full backdrop-blur-sm">
                                <i class="fas fa-trash text-white"></i>
                            </button>
                        </div>
                        <div class="mt-2">
                            <p class="text-xs text-muted-foreground">LEGO Creator • 1 day ago</p>
                        </div>
                    </div>

                    <div class="relative group">
                        <div class="aspect-square bg-gradient-to-br from-green-200 to-teal-200 rounded-xl overflow-hidden">
                            <div class="w-full h-full flex items-center justify-center text-2xl">🌟</div>
                        </div>
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-active:opacity-100 transition-opacity rounded-xl flex items-center justify-center space-x-4">
                            <button onclick="downloadImage(3)" class="p-3 bg-white/20 rounded-full backdrop-blur-sm">
                                <i class="fas fa-download text-white"></i>
                            </button>
                            <button onclick="deleteImage(3)" class="p-3 bg-white/20 rounded-full backdrop-blur-sm">
                                <i class="fas fa-trash text-white"></i>
                            </button>
                        </div>
                        <div class="mt-2">
                            <p class="text-xs text-muted-foreground">Playground • 3 days ago</p>
                        </div>
                    </div>

                    <div class="aspect-square bg-muted rounded-xl flex items-center justify-center border-2 border-dashed border-border">
                        <div class="text-center">
                            <i class="fas fa-plus text-3xl text-muted-foreground mb-2"></i>
                            <p class="text-xs text-muted-foreground">Create new</p>
                        </div>
                    </div>
                    <!-- @END_MAP )) -->
                </div>

                <!-- Empty State (if no images) -->
                <div id="emptyGallery" class="hidden text-center py-16">
                    <i class="fas fa-images text-6xl text-muted-foreground mb-4"></i>
                    <h3 class="text-lg font-semibold mb-2">No creations yet</h3>
                    <p class="text-muted-foreground mb-6">Start creating amazing AI artwork!</p>
                    <button onclick="showMainMenu()" class="bg-primary text-primary-foreground px-6 py-3 rounded-xl font-medium">
                        Create Your First Image
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: Gallery -->

    <!-- @COMPONENT: LoadingModal -->
    <div id="loadingModal" class="hidden fixed inset-0 z-50 flex items-center justify-center">
        <div class="modal-backdrop absolute inset-0"></div>
        <div class="bg-card rounded-2xl p-8 mx-4 relative z-10 text-center max-w-sm w-full">
            <div class="loading-spinner mx-auto mb-4"></div>
            <h3 class="font-semibold mb-2" id="loadingTitle">Generating your creation...</h3>
            <p class="text-muted-foreground text-sm" id="loadingMessage">This may take a few moments</p>
        </div>
    </div>
    <!-- @END_COMPONENT: LoadingModal -->

    <!-- @COMPONENT: ResultModal -->
    <div id="resultModal" class="hidden fixed inset-0 z-50 flex items-center justify-center">
        <div class="modal-backdrop absolute inset-0" onclick="closeResultModal()"></div>
        <div class="bg-card rounded-2xl p-6 mx-4 relative z-10 max-w-md w-full">
            <div class="flex items-center justify-between mb-4">
                <h3 class="font-semibold">Your Creation</h3>
                <button onclick="closeResultModal()" class="p-2 rounded-lg hover:bg-muted">
                    <i class="fas fa-times text-muted-foreground"></i>
                </button>
            </div>
            
            <div class="mb-4">
                <div id="resultImage" class="aspect-square bg-gradient-to-br from-purple-200 to-pink-200 rounded-xl flex items-center justify-center text-4xl">
                    🎨
                </div>
            </div>
            
            <div class="flex space-x-3">
                <button onclick="downloadResult()" class="flex-1 bg-primary text-primary-foreground py-3 rounded-xl font-medium">
                    <i class="fas fa-download mr-2"></i>
                    Download
                </button>
                <button onclick="saveToGallery()" class="flex-1 bg-muted text-muted-foreground py-3 rounded-xl font-medium">
                    <i class="fas fa-save mr-2"></i>
                    Save
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: ResultModal -->

    <script>
        // @STATE: currentScreen:string = 'welcome'
        // @STATE: selectedEmojis:array = []
        // @STATE: selectedBackground:string = 'gradient1'
        // @STATE: userCreations:array = []
        
        (function() {
            // Navigation functions
            window.showMainMenu = function() {
                hideAllScreens();
                document.getElementById('mainMenu').classList.remove('hidden');
                document.getElementById('mainMenu').classList.add('fade-in');
            };

            window.showDrawingAssistant = function() {
                hideAllScreens();
                document.getElementById('drawingAssistant').classList.remove('hidden');
                document.getElementById('drawingAssistant').classList.add('fade-in');
            };

            window.showLegoCreator = function() {
                hideAllScreens();
                document.getElementById('legoCreator').classList.remove('hidden');
                document.getElementById('legoCreator').classList.add('fade-in');
            };

            window.showPlayground = function() {
                hideAllScreens();
                document.getElementById('playground').classList.remove('hidden');
                document.getElementById('playground').classList.add('fade-in');
            };

            window.showGallery = function() {
                hideAllScreens();
                document.getElementById('gallery').classList.remove('hidden');
                document.getElementById('gallery').classList.add('fade-in');
            };

            function hideAllScreens() {
                const screens = ['welcomeScreen', 'mainMenu', 'drawingAssistant', 'legoCreator', 'playground', 'gallery'];
                screens.forEach(screen => {
                    const element = document.getElementById(screen);
                    if (element) {
                        element.classList.add('hidden');
                        element.classList.remove('fade-in');
                    }
                });
            }

            // Drawing Assistant functions
            window.showStyleTransfer = function() {
                document.getElementById('styleTransferSection').classList.remove('hidden');
                document.getElementById('textToImageSection').classList.add('hidden');
                // Update button styles
                event.target.classList.add('bg-primary', 'text-primary-foreground');
                event.target.classList.remove('bg-muted', 'text-muted-foreground');
                // TODO: Update sibling button styles
            };

            window.showTextToImage = function() {
                document.getElementById('textToImageSection').classList.remove('hidden');
                document.getElementById('styleTransferSection').classList.add('hidden');
                // Update button styles
                event.target.classList.add('bg-primary', 'text-primary-foreground');
                event.target.classList.remove('bg-muted', 'text-muted-foreground');
                // TODO: Update sibling button styles
            };

            // Generation functions
            window.generateStyleTransfer = function() {
                showLoading('Applying artistic style...', 'Transforming your image with AI magic');
                // TODO: Implement Gemini API call for style transfer
                setTimeout(() => {
                    hideLoading();
                    showResult();
                }, 3000);
            };

            window.generateTextToImage = function() {
                showLoading('Creating your image...', 'Bringing your imagination to life');
                // TODO: Implement Gemini API call for text-to-image
                setTimeout(() => {
                    hideLoading();
                    showResult();
                }, 3000);
            };

            window.generateLego = function() {
                showLoading('Designing LEGO creation...', 'Building your custom LEGO set');
                // TODO: Implement Gemini API call for LEGO generation
                setTimeout(() => {
                    hideLoading();
                    showResult();
                }, 3000);
            };

            window.generatePlayground = function() {
                showLoading('Creating magical artwork...', 'Combining emojis and backgrounds');
                // TODO: Implement Gemini API call for playground generation
                setTimeout(() => {
                    hideLoading();
                    showResult();
                }, 3000);
            };

            // Playground functions
            window.addEmoji = function(emoji) {
                const selectedEmojis = document.getElementById('selectedEmojis');
                const currentEmojis = selectedEmojis.textContent;
                if (currentEmojis.length < 15) { // Limit to 5 emojis
                    selectedEmojis.textContent = currentEmojis + emoji;
                }
            };

            window.selectBackground = function(backgroundId) {
                // TODO: Update canvas background preview
                // TODO: Update button selection state
            };

            window.clearPlayground = function() {
                document.getElementById('selectedEmojis').textContent = '';
                // TODO: Reset background selection
            };

            // Gallery functions
            window.downloadImage = function(imageId) {
                // TODO: Implement image download functionality
                console.log('Downloading image:', imageId);
            };

            window.deleteImage = function(imageId) {
                // TODO: Implement image deletion with confirmation
                if (confirm('Are you sure you want to delete this image?')) {
                    console.log('Deleting image:', imageId);
                    // TODO: Remove from gallery and update UI
                }
            };

            // Modal functions
            function showLoading(title, message) {
                document.getElementById('loadingTitle').textContent = title;
                document.getElementById('loadingMessage').textContent = message;
                document.getElementById('loadingModal').classList.remove('hidden');
            }

            function hideLoading() {
                document.getElementById('loadingModal').classList.add('hidden');
            }

            function showResult() {
                document.getElementById('resultModal').classList.remove('hidden');
            }

            window.closeResultModal = function() {
                document.getElementById('resultModal').classList.add('hidden');
            };

            window.downloadResult = function() {
                // TODO: Implement result download
                console.log('Downloading result');
                closeResultModal();
            };

            window.saveToGallery = function() {
                // TODO: Save to user gallery
                console.log('Saving to gallery');
                closeResultModal();
            };

            // PWA Installation prompt
            let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                deferredPrompt = e;
                // TODO: Show install app banner
            });

            // Initialize app
            document.addEventListener('DOMContentLoaded', function() {
                // Show welcome screen on first load
                console.log('ICWAI App initialized');
            });
        })();
    </script>

    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiSUNXQUkgLSBBSSBDcmVhdGl2ZSBTdHVkaW8iLCJzaG9ydF9uYW1lIjoiSUNXQUkiLCJzdGFydF91cmwiOiIvIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiIzY2N2VlYSIsInRoZW1lX2NvbG9yIjoiIzY2N2VlYSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWlJSFpwWlhkQ2IzZzlJakFnTUNBMU1USWdOVEV5SWlCbWFXeHNQU0lqTmpZM1pXVmhJajQ4TDNOMlp6ND0iLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XX0=">
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:application/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZXZlbnQgPT4ge2NvbnNvbGUubG9nKCdTVyBpbnN0YWxsZWQnKTt9KTs=')
                .then(registration => console.log('SW registered'))
                .catch(error => console.log('SW registration failed'));
        }
    </script>
</body>
</html>